# git使用教程

本教程旨在为初学者提供一个清晰、完整的 Git 与 GitHub 操作流程。我们将从零开始，涵盖账号注册、环境配置、仓库管理以及日常的文件更新与同步操作。

## **第一步：GitHub 账号的创建**

GitHub 是一个基于 Git 的代码托管平台。首先，我们需要一个GitHub账号。（要求提前安装git）

1. **访问官网**：在浏览器中打开 GitHub 官网 https://github.com/。
2. **注册账号**：点击页面右上角的 “Sign up” 按钮。按照提示输入您的电子邮箱、创建一个密码和一个独特的用户名。
3. **人机验证**：完成一个简单的验证任务，以证明您不是机器人。
4. **验证邮箱**：GitHub 会向您的注册邮箱发送一封验证邮件。登录您的邮箱，点击邮件中的链接以完成验证。
5. **完成设置**：登录后，您可以根据个人喜好进行一些个性化设置，但这对于后续操作不是必需的。

至此，您已经拥有了一个 GitHub 账号。

---

## **第二步：SSH Key 密钥的建立与添加**

为了让您的本地计算机能安全地与 GitHub 服务器通信（例如，推送代码时无需每次都输入密码），我们推荐使用 SSH 协议。

**1. 生成 SSH Key **

- **Windows 用户**：打开 Git Bash（安装 Git 后自带）。
- **macOS / Linux 用户**：打开终端（Terminal）。

在打开的命令行窗口中，输入以下命令，并将 `your_email@example.com` 替换为您在 GitHub 注册的邮箱地址：

```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

- **解释**：`ssh-keygen` 是生成密钥的工具。`-t ed25519` 指定了使用当前更安全和高效的ed25519 算法。`-C` 是添加注释，通常用邮箱作为标识。

接下来，系统会提示你：

- **`Enter a file in which to save the key`**：这是询问你将密钥文件保存在哪里。直接按回车键（Enter）使用默认路径即可。
- **`Enter passphrase (empty for no passphrase)`**：这是为你的密钥设置一个密码。如果设置了，每次使用该密钥时都需要输入此密码。为方便起见，初学者可以直接按回车键两次，表示不设置密码。

**2. 将 SSH 公钥添加到 GitHub**

生成密钥后，你需要将**公钥**（`.pub` 结尾的文件）的内容添加到你的 GitHub 账户中。

- 首先，查看并复制你的公钥内容。在终端中输入：

  ```bash
  cat ~/.ssh/id_ed25519.pub
  ```

  - **解释**：`cat` 命令用于显示文件内容。`~/.ssh/id_ed25519.pub` 是公钥的默认路径。

- 复制终端上显示的以 `ssh-ed25519` 开头、以你的邮箱结尾的全部内容。

- 登录 GitHub，点击右上角的头像，选择 **Settings**。

- 在左侧菜单中，点击 **SSH and GPG keys**。

- 点击 **New SSH key** 按钮。

- 在 **Title** 栏中，为此密钥起一个名字（例如 `My MacBook` 或 `Work PC`），方便你区分。

- 在 **Key** 文本框中，粘贴你刚刚复制的公钥内容。

- 最后，点击 **Add SSH key**。

**3. 验证连接**

在终端中输入以下命令，测试连接是否成功：

```bash
ssh -T git@github.com
```

如果你看到类似 `Hi [your-username]! You've successfully authenticated...` 的信息，说明 SSH 配置成功！

---

## **第三步：仓库的创建与本地 Clone**

“仓库”（Repository）是用来存放项目代码的地方。

**1. 在 GitHub 上创建远程仓库**

- 登录 GitHub，点击页面右上角的 `+` 号，选择 **New repository**。
- **Repository name**：为你的仓库起一个名字（例如 `git-practice`）。
- **Description (optional)**：填写对仓库的简单描述。
- **Public / Private**：选择仓库是公开的还是私有的。
- **注意**：暂时**不要**勾选 "Add a README file", "Add .gitignore", "Choose a license"。保持一个完全空的状态，这样便于我们进行第一次本地推送。
- 点击 **Create repository**。 点击创建仓库。

**2. 从 GitHub 克隆 (Clone) 仓库到本地**

创建仓库后，你会进入一个指引页面。

- 点击 **Code** 按钮，确保你选择的是 **SSH** 标签页。

- 复制提供的 SSH 地址（形如 `git@github.com:your-username/your-repo-name.git`）。

- 打开你本地的终端（Git Bash），使用 `cd` 命令进入你想要存放项目的文件夹（例如 `cd ~/Desktop`）。

- 运行 `git clone` 命令，并粘贴刚刚复制的地址：

  ```bash
  git clone git@github.com:your-username/git-practice.git
  ```

  - **解释**：`git clone` 会在当前目录下创建一个与你的远程仓库同名的文件夹（`git-practice`），并自动初始化好 Git 环境，同时将远程仓库地址设置为名为 `origin` 的默认远程主机。

---

## **第四步：在本地创建文件并更新上传到 GitHub 库**

这是最核心的日常操作：修改代码 -> 提交 -> 推送。

1. **进入项目目录**：

   ```bash
   cd git-practice
   ```

2. **创建新文件**：

   ```bash
   echo "git-practice" > README.md
   ```

   - **解释**：`echo` 命令会在终端打印文本，`>` 符号会将文本内容写入到 `README.md` 文件中。你也可以直接用文本编辑器（如 VS Code）创建并编辑文件。

3. **查看状态**：

   ```bash
   git status
   ```

   - **解释**：`git status` 是一个非常有用的命令，它会告诉你当前工作区的状态。此时它会提示你有一个 "Untracked files" (未跟踪的文件) `readme.txt`。

4. **添加到暂存区 (Stage)**：

   ```bash
   git add README.md
   ```

   - **解释**：`git add` 命令将文件的当前快照添加到一个叫做“暂存区”的地方，表示你希望在下一次提交中包含这个文件的改动。如果要添加所有修改过的文件，可以使用 `git add .`。

5. **提交到本地仓库 (Commit)**： 提交到本地仓库 (提交)：

   ```bash
   git commit -m "创建并添加了 README.md 文件"
   ```

   - **解释**：`git commit` 命令将暂存区里的所有内容正式提交到你的本地仓库历史中。`-m` 后面跟着的是本次提交的说明信息，必须填写，且应清晰明了。

6. **推送到远程 GitHub 仓库 (Push)**：

   ```bash
   git push origin main
   ```

   - **解释**：`git push` 命令将你的本地提交推送到远程服务器。
   - `origin` 是你远程仓库的默认别名（`clone` 时自动设置的）。
   - `main` 是你当前本地分支的名称。对于一些旧仓库，这个分支可能叫做 `master`。

现在刷新你的 GitHub 仓库页面，你将看到 `README.md` 文件已经上传成功了。

---

## **第五步：本地创建文件夹并更新上传到 GitHub 库**

Git 本身不直接跟踪空文件夹，你必须在文件夹里放一个文件，Git 才能跟踪它。

1. **创建文件夹和文件**：

   ```bash
   # 创建一个名为 assets 的文件夹
   mkdir assets
   
   # 在 assets 文件夹内创建一个名为 style.css 的文件
   echo "body { color: #333; }" > assets/style.css
   ```

   - **解释**：`mkdir` 用于创建文件夹。

2. **查看状态、添加、提交、推送**： 这个流程和上一步完全一样。

   ```bash
   # 查看状态，会发现一个新的 assets/ 文件夹
   git status
   
   # 将整个文件夹及其内容添加到暂存区
   git add assets
   # 或者用 . 来添加所有新改动（建议使用，随时可以用git status查看当前状态）
   # git add .
   
   # 提交到本地仓库
   git commit -m "添加 assets 文件夹及样式文件"
   
   # 推送到远程 GitHub 仓库
   git push origin main
   ```

刷新 GitHub 页面，你将看到 `assets` 文件夹。

---

## **第六步：将 GitHub 库的内容覆盖本地内容（本地更新）**

当远程仓库有了新的更新（例如，你的同事推送了代码，或者你直接在 GitHub 网站上修改了文件），你需要将这些更新同步到本地。

这里提供两种方法，**方法A是常规、安全**的做法，**方法B是强制覆盖**。

### 方法A：标准拉取（推荐）

这个方法会获取远程的更新并与你的本地内容合并。

```bash
git pull origin main
```

- **解释**：`git pull` 是 `git fetch`（从远程获取）和 `git merge`（合并）的组合。它会把 `origin` 主机的 `main` 分支的最新内容拉取下来，并自动与你当前的本地分支合并。这是最常用的保持同步的命令。

### 方法B：强制用远程内容覆盖本地（危险操作,不建议使用）

**⚠️ 警告**：此操作会**丢弃你所有本地的修改和未推送的提交**，让你的本地仓库和远程仓库的状态完全一致。请仅在确认你不需要任何本地改动时使用。

1. **先从远程获取最新内容**（但先不合并）：

   ```bash
   git fetch origin
   ```

   - **解释**：`git fetch` 只是将远程仓库的最新历史下载到本地，但不会对你的工作目录做任何修改。

2. **然后将本地分支硬性重置为远程分支的状态**：

   ```bash
   git reset --hard origin/main
   ```

   - **解释**：`git reset --hard` 是一个强力命令。`origin/main` 指向的是刚刚 `fetch` 下来的远程 `main` 分支的最新位置。这条命令会强制将你的本地 `main` 分支移动到那个位置，并丢弃所有中间的、本地独有的改动和提交，同时更新你的工作目录文件，使之与远程版本完全一样。

---

### **第七步：分支 (Branch) 的核心理念与操作**

分支允许你从主线（`main`）分离出来，在一个独立、安全的环境中开发新功能，完成后再将成果合并回来。

**1. 创建并切换分支** 假设我们要开发一个“增强搜索”的功能，我们将创建一个名为 `feature1` 的分支。最常用的一步到位的命令是：

```bash
# 这个命令会创建新分支，并立即切换过去
git switch -c feature1
```

- **所在分支**：此操作前你在哪个分支，新分支就基于哪个分支创建（通常是 `main`）。操作后，你将位于新的 **`feature`** 分支。

**2. 查看分支** 确认你当前所在的分支。

```bash
git branch
```

- **解释**：星号 `*` 所在行即为你当前的分支。

---

### **第八步：在分支上独立工作并与远程同步**

在 `feature` 分支上，你可以自由地开发，不用担心影响 `main` 分支。

**1. 在分支上提交代码** 正常进行“修改 -> 添加 -> 提交”的循环。

```bash
# (在 feature-search 分支)
# 1. 进行代码修改...（例如创建一个文件bcd.v，是一个BCD计数器）
# 2. git add .（省事）
# 3. git commit -m "BCD计数器"
```

**2. 将新分支推送到远程仓库** 为了备份或协作，将新分支推送到 GitHub。

```bash
# (在 feature-search 分支)
# 首次推送新分支时，使用 -u 参数建立跟踪关系
git push -u origin feature1
```

- **解释**：此后，在该分支上再次推送，只需简单的 `git push` 即可。

---

### **第九步：合并分支：将成果汇入主线**

功能开发完毕后，需要将其合并回 `main` 分支。

**1. 合并前的准备（黄金法则）**

```bash
# 步骤A: 切换回你的目标分支，即 main 分支
git switch main

# 步骤B: 确保 main 分支是最新状态(一般未做修改也可以不用，如果是个人使用确保main未被污染即可)
git pull origin main
```

- **所在分支**：从这里开始，绝大部分操作都在 **`main`** 分支执行。

**2. 执行合并** 推荐使用 `--no-ff` 策略，以保留清晰的分支历史。

```bash
# (在 main 分支)
git merge --no-ff feature-search
```

- **执行后可能出现两种结果**：
  - **结果一：合并成功**。如果没有任何冲突，Git 会自动创建一个合并提交。你可以直接跳到本步骤的第 4 点。
  - **结果二：合并冲突**。如果 Git 无法自动合并，它会停下来，等待你手动解决。此时，你就进入了“合并模式”。

**3. 关键：处理合并冲突（或退出合并模式）**

当你因为冲突而进入“合并模式”时，终端会提示 `MERGING` 状态。你有两个选择：

- **选择A：中止合并（安全退出合并模式）** 如果你对冲突感到困惑，或者不确定如何解决，最安全的选择是放弃本次合并，让仓库恢复到合并之前的状态。

  Bash

  ```
  # (在 main 分支，处于 MERGING 状态时)
  git merge --abort
  ```

  - **效果**：所有合并操作将被撤销，你的代码会回到执行 `git merge` 之前的样子。你可以重新检查代码，然后再尝试合并。

- **选择B：手动解决冲突并完成合并**

  1. **定位文件**：运行 `git status` 查看哪些文件处于冲突状态（标记为 `unmerged`）。

  2. **编辑文件**：打开冲突文件，你会看到类似 `<<<<<<< HEAD`、`=======`、`>>>>>>>` 的标记。手动修改这部分代码，删除这些标记，并将代码整理成你最终想要的样子。

  3. **标记解决**：解决完一个文件后，使用 `git add` 命令将其标记为“已解决”。

     ```bash
     # (在 main 分支，处于 MERGING 状态时)
     git add <你刚刚手动修改过的文件名>
     ```

  4. **完成合并**：当所有冲突文件都通过 `git add` 标记为已解决后，执行一次提交来最终完成这次合并。

     ```bash
     # (在 main 分支，处于 MERGING 状态时)
     git commit
     ```

     - **提示**：执行 `git commit` 时，Git 会自动为你生成一条合并提交信息，你通常无需修改，直接保存并退出编辑器即可。

**4. 推送合并结果并退出merge** 在你成功完成合并后（无论是无冲突直接成功，还是手动解决冲突后成功），你的本地 `main` 分支就已经更新了。最后一步是将其推送到远程仓库。

```bash
# (在 main 分支)
git push origin main
git merge --quit
```

---

### **第十步：清理已完成的分支**

分支合并后，它的使命就完成了。为了保持仓库的整洁，我们应该删除它。

**1. 删除本地分支**

```bash
# (在 main 分支)
git branch -d feature1
```

- **所在分支**：**`main`** 分支。你不能删除你正所在的分支。
- **解释**：`-d` 是安全删除，如果分支未被合并，它会提示你。

**2. 删除远程 GitHub 上的分支**

```bash
# (在 main 分支)
git push origin --delete feature1
```

- **所在分支**：推荐在 **`main`** 分支。此操作会删除 GitHub 上的对应分支，让项目页面保持整洁。
